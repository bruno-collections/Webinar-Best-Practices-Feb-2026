info:
  name: 05-Scripts and Chaining
  type: folder
  seq: 5

request: {}

docs:
  content: |-
    # âš¡ Section 5: Scripts and Chaining

    Scripts let you run JavaScript **before** and **after** requests â€” enabling powerful data manipulation, request chaining, and visualization.

    In this section, you will:

    - âœ… Dynamically modify requests using pre-request scripts
    - âœ… Generate realistic test data with `bru.setVar()`
    - âœ… Chain requests together with `bru.runRequest()`
    - âœ… Visualize response data with `bru.visualize()`

    ğŸ“Œ Make sure the **Workshop** environment is selected from the dropdown (top right).

    ---

    ### ğŸ“‹ Requests in This Section

    ---

    **ğŸ”¹ Dynamically Set Requests** â€” Modify a request on the fly with scripts
    - A pre-request script uses `req.setBody()`, `req.setHeaders()`, and `req.setMethod()` to transform the request before it sends
    - ğŸ¯ **Your task:** The body values, Content-Type header, and `console.log()` statements are **empty** â€” fill them in
    - ğŸ’¡ **Hint:** The script changes a GET into a POST with a JSON body â€” what Content-Type does JSON use?

    ---

    **ğŸ”¹ Generate Test Data** â€” Create realistic fake data in pre-request scripts
    - Generates random usernames, emails, timestamps, and request IDs using `bru.setVar()` to populate the request body
    - ğŸ¯ **Your task:** The `firstNames` and `lastNames` arrays are **empty** â€” add some names. The `bru.setVar()` calls and `console.log()` are also **missing values**
    - ğŸ’¡ **Hint:** Look at how `username` and `email` are derived from the name arrays
    - **Try it:** Send multiple times â€” data changes with every request!

    ---

    **ğŸ”¹ Update Post** â€” Captures a post ID for use in chaining
    - Sends a PUT request to update a post and captures the returned ID with `bru.setVar("capturedPostId", ...)`
    - âœ… This request is mostly complete â€” send it and check the **Timeline** tab to see the captured values
    - This is the "first step" in the request chain used by **Get Post Details**

    ---

    **ğŸ”¹ Get Post Details** â€” Request chaining with `bru.runRequest()`
    - Uses a pre-request script to run **Update Post** first, then fetches the post using the captured ID
    - ğŸ¯ **Your task:** The `bru.runRequest()` path is **incomplete** â€” fill in the correct path to the Update Post request
    - ğŸ¯ **Your task:** The response logging values are **empty** â€” fill in the correct properties from the response
    - ğŸ’¡ **Hint:** `bru.runRequest()` paths are relative to the **collection root** (e.g., `"folder/subfolder/Request Name"`)

    ---

    **ğŸ”¹ Visualize Response** â€” Interactive data visualization
    - Fetches all users and renders them as a sortable, filterable table using `bru.visualize()`
    - ğŸ¯ **Your task:** The `bru.visualize()` call and `console.log()` are **commented out** â€” uncomment them
    - **Try it:** Send the request, then switch to the **Visualize** tab to see the interactive table

    ---

    ### ğŸ“ Solution Folder

    The **Solution** subfolder contains fully working versions of all requests.

    **Solution requests:**
    - âœ… **Dynamically Set Requests** â€” complete with body values, headers, and logging
    - âœ… **Generate Test Data** (Pre-Request Scripting) â€” complete with name arrays and variable assignments
    - âœ… **Update Post** â€” captures post ID for chaining
    - âœ… **Get Post Details** â€” full request chain with `bru.runRequest()`
    - âœ… **Visualize Response** â€” active `bru.visualize()` with ag-grid table

    ---

    ### ğŸ“Œ Key Concepts

    - **Pre-request scripts** â€” run JavaScript before the request sends (`req.setBody()`, `req.setMethod()`, `req.setHeaders()`)
    - **Post-response scripts** â€” run JavaScript after the response (`bru.setVar()`, `console.log()`)
    - **`bru.runRequest()`** â€” execute another request from within a script (path is relative to collection root)
    - **`bru.setVar()` / `bru.getVar()`** â€” pass data between requests via runtime variables
    - **`bru.visualize()`** â€” render response data as interactive tables or charts in the Visualize tab
  type: text/markdown
