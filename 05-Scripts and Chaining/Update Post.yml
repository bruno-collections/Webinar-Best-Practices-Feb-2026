info:
  name: Update Post
  type: http
  seq: 3

http:
  method: PUT
  url: "{{baseUrl}}/posts/1"
  body:
    type: json
    data: |-
      {
        "title": "Updated by Bruno",
        "body": "This post was updated during the workshop to demonstrate request chaining.",
        "userId": {{defaultUserId}}
      }

runtime:
  scripts:
    - type: after-response
      code: |-
        const body = res.getBody();

        if (body && body.id) {
          bru.setVar("capturedPostId", body.id);
          console.log("âœ… Captured post ID:", body.id);
          console.log("âœ… Captured title:", body.title);
        }
    - type: tests
      code: |-
        test("Post was created successfully", () => {
          expect(res.status).to.equal(201);
          expect(res.getBody()).to.have.property("id");
          expect(res.getBody()).to.have.property("title");
        });
  assertions:
    - expression: res.status
      operator: eq
      value: "201"
    - expression: res.body.id
      operator: isNumber
    - expression: res.body.title
      operator: eq
      value: Created by Bruno

settings:
  encodeUrl: true
  timeout: 0
  followRedirects: true
  maxRedirects: 5

docs: |-
  # Create Post ðŸ”—

  This request creates a new post and **captures the returned ID** for use by other requests.

  **What happens:**
  1. Sends a POST to create a new post
  2. Captures the returned post ID with `bru.setVar("capturedPostId", body.id)`

  **Try it:**
  - Send this request and check the **Timeline** tab to see the captured values
  - Then open **Get Post Details** â€” it uses `bru.runRequest()` to call this request automatically
